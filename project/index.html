<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>LMECA2170: Final project - Delaunay triangulation</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="style.css">

		<script src="nodes_coarse.txt"></script> <!-- XXX no clue why this was given to us with a .txt extension -->
		<script type="module" src="matrix.js"></script>
		<script type="module" src="primitives.js"></script>
		<script type="module" src="beach_tree.js"></script>
		<script type="module" src="fortune.js"></script>
		<script type="module" src="priority_queue.js"></script>
		<script type="module" src="render.js"></script>
		<script type="module" src="utils.js"></script>
		<script type="module" src="shader.js"></script>

		<script type="module" src="final.js"></script>
		<script type="module" src="just_nodes.js"></script>
		<script type="module" src="voronoi.js"></script>

		<!-- node shader -->

		<script id="node-vert" type="x-shader/x-vertex">#version 300 es
			precision mediump float;
			layout(location = 0) in vec2 node;
			uniform mat4 u_mvp;

			void main(void) {
				gl_Position = u_mvp * vec4(node, 0.0, 1.0);
			}
		</script>

		<script id="node-frag" type="x-shader/x-fragment">#version 300 es
			precision mediump float;
			out vec4 out_colour;

			void main(void) {
				out_colour = vec4(1.0, 0.9, 0.8, 1.0);
			}
		</script>

		<!-- voronoi shader -->

		<script id="voronoi-vert" type="x-shader/x-vertex">#version 300 es
			precision mediump float;
			layout(location = 0) in vec2 node;
			uniform mat4 u_mvp;

			void main(void) {
				gl_Position = u_mvp * vec4(node, 0.0, 1.0);
			}
		</script>

		<script id="voronoi-frag" type="x-shader/x-fragment">#version 300 es
			precision mediump float;
			out vec4 out_colour;

			void main(void) {
				out_colour = vec4(0.7, 1.0, 0.8, 0.5);
			}
		</script>

		<!-- triangle shader -->

		<script id="tri-vert" type="x-shader/x-vertex">#version 300 es
			precision mediump float;
			layout(location = 0) in vec2 node;
			uniform mat4 u_mvp;

			void main(void) {
				gl_Position = u_mvp * vec4(node, 0.0, 1.0);
			}
		</script>

		<script id="tri-frag" type="x-shader/x-fragment">#version 300 es
			precision mediump float;
			out vec4 out_colour;

			void main(void) {
				out_colour = vec4(1.0, 0.5, 1.0, 0.5);
			}
		</script>
	</head>
	<body>
		<div class="container">
			<h1><strong>LMECA2170</strong>: Delaunay triangulation</h1>

			<h2>Introduction</h2>
			<p>
				This article shows off <strong>Delaunay triangulation</strong> of an arbitrary set of nodes using Fortune's algorithm and the <strong>Voronoi diagram</strong>!
				It also includes interactive demonstrations every step of the way - this is what the final result will look like:
			</p>

			<div class="canvas-container">
				<canvas id="final-canvas" width="800" height="480"></canvas>
				<p id="final-time">Took - ms for - nodes</p>
			</div>

			<p>
				Throughout every demo, you can click and drag to move the camera around and scroll in and out to zoom.
			</p>

			<h2>The nodes</h2>

			<p>
				We start off by just showing the nodes themselves. You can upload your own nodes file, or click <a id="just-nodes-randomize">here</a> to generate a random set of 5000 nodes:
			</p>

			<div class="canvas-container">
				<canvas id="just-nodes-canvas" width="800" height="480"></canvas>
			</div>

			<h2>Voronoi diagram</h2>

			<p>
				The next step is to create the Voronoi diagram of the nodes. This is done by creating a <strong>beach line</strong> and <strong>sweeping</strong> it across the nodes.
				When we encounter a circle event or a site event, we add line segments to our set of Voronoi line segments, and we update the beach line accordingly.
			</p>

			<p>
				Again, you can upload your own node files, or click <a id="voronoi-randomize">here</a> to generate a random set of nodes:
			</p>

			<div class="canvas-container">
				<canvas id="voronoi-canvas" width="800" height="480"></canvas>
				<p id="voronoi-time">Took - ms for - nodes</p>
			</div>

			<h2>What is a Voronoi diagram?</h2>
			<h2>What is the relation between Delaunay and Voronoi?</h2>
			<h2>Fortune's algorithm</h2>
			<h2>Practical examples</h2>
			<p>TBD</p>
		</div>
	</body>

	<!-- TODO add these resources in a section on the page -->
	<!-- https://www.cs.tufts.edu/comp/163/demos/fortune/ -->
	<!-- https://jacquesheunis.com/post/fortunes-algorithm/ -->
</html>
